<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   width="210mm"
   height="297mm"
   viewBox="0 0 210 297"
   version="1.1"
   id="svg5"
   inkscape:version="1.1 (c4e8f9ed74, 2021-05-24)"
   sodipodi:docname="level-loading.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview7"
     pagecolor="#ffffff"
     bordercolor="#111111"
     borderopacity="1"
     inkscape:pageshadow="0"
     inkscape:pageopacity="0"
     inkscape:pagecheckerboard="1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="2.9398148"
     inkscape:cx="213.78898"
     inkscape:cy="353.76378"
     inkscape:window-width="1920"
     inkscape:window-height="1011"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1" />
  <defs
     id="defs2" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="7.3949356"
       y="22.638285"
       id="text1353"><tspan
         sodipodi:role="line"
         id="tspan1351"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="22.638285">Let us say we want to keep track of what entities we could have - or rather, do have - on some levels in</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="25.450785"
         id="tspan2147">the game.</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="28.263285"
         id="tspan14830" /><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="31.075785"
         id="tspan14832">One way we could do this is to keep track of what entities belong to what levels, and store that with</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="33.888283"
         id="tspan23456">each entity. At every frame or so, we could then check this and see if the entity still needs to be</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="36.700783"
         id="tspan23458">loaded. Essentially, we are doing a sort of <tspan
   style="font-weight:bold"
   id="tspan24684">refrence counting, but not quite</tspan>.</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:5px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="7.3949356"
       y="12.054952"
       id="text9577"><tspan
         sodipodi:role="line"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:5px;font-family:sans-serif;-inkscape-font-specification:'sans-serif Bold';stroke-width:0.264583"
         x="7.3949356"
         y="12.054952"
         id="tspan9575">Entity Manager</tspan></text>
    <rect
       style="fill:#cccccc;stroke-width:0.215726"
       id="rect28012"
       width="18.1996"
       height="10.43014"
       x="34.384991"
       y="51.32991" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="35.440769"
       y="54.38829"
       id="text28108"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="35.440769"
         y="54.38829"
         id="tspan28106">Asset ID: 1</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="35.440769"
         y="57.20079"
         id="tspan28422">Level ID: 1</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="35.440769"
         y="60.013294"
         id="tspan32606">... data ...</tspan></text>
    <rect
       style="fill:#e6e6e6;stroke-width:0.215726"
       id="rect33468"
       width="18.1996"
       height="10.43014"
       x="52.584595"
       y="51.32991" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="53.640377"
       y="54.38829"
       id="text33476"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="53.640377"
         y="54.38829"
         id="tspan33470">Asset ID: 2</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="53.640377"
         y="57.20079"
         id="tspan33472">Level ID: 1</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="53.640377"
         y="60.013294"
         id="tspan33474">... data ...</tspan></text>
    <rect
       style="fill:#cccccc;stroke-width:0.215726"
       id="rect33496"
       width="18.1996"
       height="10.43014"
       x="70.784195"
       y="51.32991" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="71.839973"
       y="54.38829"
       id="text33504"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="71.839973"
         y="54.38829"
         id="tspan33498">Asset ID: 3</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="71.839973"
         y="57.20079"
         id="tspan33500">Level ID: 1</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="71.839973"
         y="60.013294"
         id="tspan33502">... data ...</tspan></text>
    <rect
       style="fill:#fff6d5;stroke-width:0.215726"
       id="rect33506"
       width="18.1996"
       height="10.43014"
       x="88.98378"
       y="51.32991" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="90.039558"
       y="54.38829"
       id="text33514"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="90.039558"
         y="54.38829"
         id="tspan33508">Asset ID: 4</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="90.039558"
         y="57.20079"
         id="tspan33510">Level ID: 2</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="90.039558"
         y="60.013294"
         id="tspan33512">... data ...</tspan></text>
    <rect
       style="fill:#ffe680;stroke-width:0.215726"
       id="rect47616"
       width="18.1996"
       height="10.43014"
       x="107.18339"
       y="51.32991" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="108.23915"
       y="54.38829"
       id="text47624"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="108.23915"
         y="54.38829"
         id="tspan47618">Asset ID: 5</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="108.23915"
         y="57.20079"
         id="tspan47620">Level ID: 2</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="108.23915"
         y="60.013294"
         id="tspan47622">... data ...</tspan></text>
    <rect
       style="fill:#ffe680;stroke-width:0.215726"
       id="rect50227"
       width="18.1996"
       height="10.43014"
       x="34.384991"
       y="40.899773" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="35.440769"
       y="43.958153"
       id="text50235"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="35.440769"
         y="43.958153"
         id="tspan50229">Asset ID: 1</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="35.440769"
         y="46.770653"
         id="tspan50231">Level ID: 1</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="35.440769"
         y="49.583153"
         id="tspan50233">... data ...</tspan></text>
    <rect
       style="fill:#fff6d5;stroke-width:0.215726"
       id="rect50237"
       width="18.1996"
       height="10.43014"
       x="52.584595"
       y="40.899773" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="53.640377"
       y="43.958153"
       id="text50245"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="53.640377"
         y="43.958153"
         id="tspan50239">Asset ID: 2</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="53.640377"
         y="46.770653"
         id="tspan50241">Level ID: 1</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="53.640377"
         y="49.583153"
         id="tspan50243">... data ...</tspan></text>
    <rect
       style="fill:#ffe680;stroke-width:0.215726"
       id="rect50247"
       width="18.1996"
       height="10.43014"
       x="70.784195"
       y="40.899773" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="71.839973"
       y="43.958153"
       id="text50255"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="71.839973"
         y="43.958153"
         id="tspan50249">Asset ID: 3</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="71.839973"
         y="46.770653"
         id="tspan50251">Level ID: 1</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="71.839973"
         y="49.583153"
         id="tspan50253">... data ...</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="7.3949356"
       y="45.392456"
       id="text50371"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="45.392456"
         id="tspan50369">Level 1 is loaded and</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="48.204956"
         id="tspan52557">active.</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="7.3949356"
       y="55.975792"
       id="text53225"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="55.975792"
         id="tspan53737">Load Level 2, still in</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="58.788292"
         id="tspan64449">Level 1</tspan></text>
    <rect
       style="fill:#f9f9f9;stroke-width:0.215726"
       id="rect56549"
       width="18.1996"
       height="10.43014"
       x="34.384975"
       y="61.760048" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="35.440754"
       y="64.818428"
       id="text56557"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="35.440754"
         y="64.818428"
         id="tspan56555">Free</tspan></text>
    <rect
       style="fill:#f9f9f9;stroke-width:0.215726"
       id="rect56559"
       width="18.1996"
       height="10.43014"
       x="52.584579"
       y="61.760048" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="53.640362"
       y="64.818428"
       id="text56567"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="53.640362"
         y="64.818428"
         id="tspan56565">Free</tspan></text>
    <rect
       style="fill:#f9f9f9;stroke-width:0.215726"
       id="rect56569"
       width="18.1996"
       height="10.43014"
       x="70.78418"
       y="61.760048" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="71.839958"
       y="64.818428"
       id="text56577"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="71.839958"
         y="64.818428"
         id="tspan56575">Free</tspan></text>
    <rect
       style="fill:#e6e6e6;stroke-width:0.215726"
       id="rect56579"
       width="18.1996"
       height="10.43014"
       x="88.983765"
       y="61.760048" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="90.039543"
       y="64.818428"
       id="text56587"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="90.039543"
         y="64.818428"
         id="tspan56581">Asset ID: 4</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="90.039543"
         y="67.630928"
         id="tspan56583">Level ID: 2</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="90.039543"
         y="70.443428"
         id="tspan56585">... data ...</tspan></text>
    <rect
       style="fill:#cccccc;stroke-width:0.215726"
       id="rect56589"
       width="18.1996"
       height="10.43014"
       x="107.18337"
       y="61.760048" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="108.23914"
       y="64.818428"
       id="text56597"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="108.23914"
         y="64.818428"
         id="tspan56591">Asset ID: 5</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="108.23914"
         y="67.630928"
         id="tspan56593">Level ID: 2</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="108.23914"
         y="70.443428"
         id="tspan56595">... data ...</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="7.3949203"
       y="66.40593"
       id="text56603"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949203"
         y="66.40593"
         id="tspan56601">Level 1 not needed</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949203"
         y="69.21843"
         id="tspan66413">anymore, unload.</tspan></text>
    <rect
       style="fill:#b3b3b3;stroke-width:0.215726"
       id="rect70678"
       width="18.1996"
       height="10.43014"
       x="88.983795"
       y="40.899773" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="90.039581"
       y="43.958153"
       id="text70682"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="90.039581"
         y="43.958153"
         id="tspan70680">Not</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="90.039581"
         y="46.770653"
         id="tspan70964">Allocated</tspan></text>
    <rect
       style="fill:#b3b3b3;stroke-width:0.215726"
       id="rect70684"
       width="18.1996"
       height="10.43014"
       x="107.1834"
       y="40.899773" />
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="108.23917"
       y="43.958153"
       id="text70688"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="108.23917"
         y="43.958153"
         id="tspan70686">Not</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="108.23917"
         y="46.770653"
         id="tspan73114">Allocated</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:2.25px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:sans-serif;stroke-width:0.264583"
       x="7.3949356"
       y="78.729958"
       id="text75016"><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="78.729958"
         id="tspan75014">There are some advantages and disadvantages to this:</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="81.542458"
         id="tspan109055" /><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="84.354958"
         id="tspan80018"> → It allows everything to be controlled independently of one another, so we can free and allocate as </tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="87.167458"
         id="tspan99934">needed. </tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="89.979958"
         id="tspan113201"> → We can't free the actual memory used by them, since the active entity names are derived from</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="92.792458"
         id="tspan155245">their index. Moving the entities downstream would cause the wrong IDs to be used.</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="95.604958"
         id="tspan165325">    → NOTE: Maybe this could be fixed easily?</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="98.417458"
         id="tspan170880">    → NOTE: Actually, this would only affect the masks of the entities. The actual entity storage is</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="101.22996"
         id="tspan170882">        already using something like this that would allow it to be done easily.</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="104.04246"
         id="tspan185768">        → One thing to try is to swap the entity masks for entity lists, like I once tried to do but </tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="106.85496"
         id="tspan189748">            stopped doing it because it took more memory and made little performance difference.</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="109.66746"
         id="tspan174528">    → NOTE: I tried coming up with a method that used offsets and was simple, but I think you have</tspan><tspan
         sodipodi:role="line"
         style="stroke-width:0.264583"
         x="7.3949356"
         y="112.47996"
         id="tspan174534">        to store a list of offsets and some other data - something I don't want to do.</tspan></text>
  </g>
</svg>
